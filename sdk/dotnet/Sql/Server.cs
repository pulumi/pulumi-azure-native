// *** WARNING: this file was generated by pulumi. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.AzureNative.Sql
{
    /// <summary>
    /// An Azure SQL Database server.
    /// 
    /// Uses Azure REST API version 2023-08-01. In version 2.x of the Azure Native provider, it used API version 2021-11-01.
    /// 
    /// Other available API versions: 2014-04-01, 2015-05-01-preview, 2019-06-01-preview, 2020-02-02-preview, 2020-08-01-preview, 2020-11-01-preview, 2021-02-01-preview, 2021-05-01-preview, 2021-08-01-preview, 2021-11-01, 2021-11-01-preview, 2022-02-01-preview, 2022-05-01-preview, 2022-08-01-preview, 2022-11-01-preview, 2023-02-01-preview, 2023-05-01-preview, 2023-08-01-preview, 2024-05-01-preview. These can be accessed by generating a local SDK package using the CLI command `pulumi package add azure-native sql [ApiVersion]`. See the [version guide](../../../version-guide/#accessing-any-api-version-via-local-packages) for details.
    /// 
    /// **Warning:** when `AzureADOnlyAuthentication` is enabled, the Azure SQL API rejects any `AdministratorLoginPassword`, even if it is the same as the current one.
    /// 
    /// According to the Azure team, this API design owes to the following reasons:
    /// - Changing the password is not allowed when Entra-only authentication is enabled because it could lead to invalid templates.
    /// - Any updates containing the same, unchanged password are also rejected because different behavior for same vs different passwords would be a vector for brute forcing the password.
    /// 
    /// To work around this, you can comment out `AdministratorLoginPassword` when enabling `AzureADOnlyAuthentication`. To update the password, you can disable `AzureADOnlyAuthentication` and re-enable it after the update.
    /// 
    /// For more details and discussion please see [this issue](https://github.com/pulumi/pulumi-azure-native/issues/2937).
    /// </summary>
    [AzureNativeResourceType("azure-native:sql:Server")]
    public partial class Server : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Administrator username for the server. Once created it cannot be changed.
        /// </summary>
        [Output("administratorLogin")]
        public Output<string?> AdministratorLogin { get; private set; } = null!;

        /// <summary>
        /// The Azure Active Directory administrator of the server. This can only be used at server create time. If used for server update, it will be ignored or it will result in an error. For updates individual APIs will need to be used.
        /// </summary>
        [Output("administrators")]
        public Output<Outputs.ServerExternalAdministratorResponse?> Administrators { get; private set; } = null!;

        /// <summary>
        /// The Azure API version of the resource.
        /// </summary>
        [Output("azureApiVersion")]
        public Output<string> AzureApiVersion { get; private set; } = null!;

        /// <summary>
        /// Status of external governance.
        /// </summary>
        [Output("externalGovernanceStatus")]
        public Output<string> ExternalGovernanceStatus { get; private set; } = null!;

        /// <summary>
        /// The Client id used for cross tenant CMK scenario
        /// </summary>
        [Output("federatedClientId")]
        public Output<string?> FederatedClientId { get; private set; } = null!;

        /// <summary>
        /// The fully qualified domain name of the server.
        /// </summary>
        [Output("fullyQualifiedDomainName")]
        public Output<string> FullyQualifiedDomainName { get; private set; } = null!;

        /// <summary>
        /// The Azure Active Directory identity of the server.
        /// </summary>
        [Output("identity")]
        public Output<Outputs.ResourceIdentityResponse?> Identity { get; private set; } = null!;

        /// <summary>
        /// Whether or not to enable IPv6 support for this server.  Value is optional but if passed in, must be 'Enabled' or 'Disabled'
        /// </summary>
        [Output("isIPv6Enabled")]
        public Output<string?> IsIPv6Enabled { get; private set; } = null!;

        /// <summary>
        /// A CMK URI of the key to use for encryption.
        /// </summary>
        [Output("keyId")]
        public Output<string?> KeyId { get; private set; } = null!;

        /// <summary>
        /// Kind of sql server. This is metadata used for the Azure portal experience.
        /// </summary>
        [Output("kind")]
        public Output<string> Kind { get; private set; } = null!;

        /// <summary>
        /// Resource location.
        /// </summary>
        [Output("location")]
        public Output<string> Location { get; private set; } = null!;

        /// <summary>
        /// Minimal TLS version. Allowed values: 'None', 1.0', '1.1', '1.2', '1.3'
        /// </summary>
        [Output("minimalTlsVersion")]
        public Output<string?> MinimalTlsVersion { get; private set; } = null!;

        /// <summary>
        /// Resource name.
        /// </summary>
        [Output("name")]
        public Output<string> Name { get; private set; } = null!;

        /// <summary>
        /// The resource id of a user assigned identity to be used by default.
        /// </summary>
        [Output("primaryUserAssignedIdentityId")]
        public Output<string?> PrimaryUserAssignedIdentityId { get; private set; } = null!;

        /// <summary>
        /// List of private endpoint connections on a server
        /// </summary>
        [Output("privateEndpointConnections")]
        public Output<ImmutableArray<Outputs.ServerPrivateEndpointConnectionResponse>> PrivateEndpointConnections { get; private set; } = null!;

        /// <summary>
        /// Whether or not public endpoint access is allowed for this server.  Value is optional but if passed in, must be 'Enabled' or 'Disabled' or 'SecuredByPerimeter'
        /// </summary>
        [Output("publicNetworkAccess")]
        public Output<string?> PublicNetworkAccess { get; private set; } = null!;

        /// <summary>
        /// Whether or not to restrict outbound network access for this server.  Value is optional but if passed in, must be 'Enabled' or 'Disabled'
        /// </summary>
        [Output("restrictOutboundNetworkAccess")]
        public Output<string?> RestrictOutboundNetworkAccess { get; private set; } = null!;

        /// <summary>
        /// The state of the server.
        /// </summary>
        [Output("state")]
        public Output<string> State { get; private set; } = null!;

        /// <summary>
        /// Resource tags.
        /// </summary>
        [Output("tags")]
        public Output<ImmutableDictionary<string, string>?> Tags { get; private set; } = null!;

        /// <summary>
        /// Resource type.
        /// </summary>
        [Output("type")]
        public Output<string> Type { get; private set; } = null!;

        /// <summary>
        /// The version of the server.
        /// </summary>
        [Output("version")]
        public Output<string?> Version { get; private set; } = null!;

        /// <summary>
        /// Whether or not existing server has a workspace created and if it allows connection from workspace
        /// </summary>
        [Output("workspaceFeature")]
        public Output<string> WorkspaceFeature { get; private set; } = null!;


        /// <summary>
        /// Create a Server resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public Server(string name, ServerArgs args, CustomResourceOptions? options = null)
            : base("azure-native:sql:Server", name, args ?? new ServerArgs(), MakeResourceOptions(options, ""))
        {
        }

        private Server(string name, Input<string> id, CustomResourceOptions? options = null)
            : base("azure-native:sql:Server", name, null, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                Aliases =
                {
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20140401:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20150501preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20190601preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20200202preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20200801preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20201101preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20210201preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20210501preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20210801preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20211101:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20211101preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20220201preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20220501preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20220801preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20221101preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20230201preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20230501preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20230801:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20230801preview:Server" },
                    new global::Pulumi.Alias { Type = "azure-native:sql/v20240501preview:Server" },
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing Server resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static Server Get(string name, Input<string> id, CustomResourceOptions? options = null)
        {
            return new Server(name, id, options);
        }
    }

    public sealed class ServerArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Administrator username for the server. Once created it cannot be changed.
        /// </summary>
        [Input("administratorLogin")]
        public Input<string>? AdministratorLogin { get; set; }

        /// <summary>
        /// The administrator login password (required for server creation).
        /// </summary>
        [Input("administratorLoginPassword")]
        public Input<string>? AdministratorLoginPassword { get; set; }

        /// <summary>
        /// The Azure Active Directory administrator of the server. This can only be used at server create time. If used for server update, it will be ignored or it will result in an error. For updates individual APIs will need to be used.
        /// </summary>
        [Input("administrators")]
        public Input<Inputs.ServerExternalAdministratorArgs>? Administrators { get; set; }

        /// <summary>
        /// The Client id used for cross tenant CMK scenario
        /// </summary>
        [Input("federatedClientId")]
        public Input<string>? FederatedClientId { get; set; }

        /// <summary>
        /// The Azure Active Directory identity of the server.
        /// </summary>
        [Input("identity")]
        public Input<Inputs.ResourceIdentityArgs>? Identity { get; set; }

        /// <summary>
        /// Whether or not to enable IPv6 support for this server.  Value is optional but if passed in, must be 'Enabled' or 'Disabled'
        /// </summary>
        [Input("isIPv6Enabled")]
        public InputUnion<string, Pulumi.AzureNative.Sql.ServerNetworkAccessFlag>? IsIPv6Enabled { get; set; }

        /// <summary>
        /// A CMK URI of the key to use for encryption.
        /// </summary>
        [Input("keyId")]
        public Input<string>? KeyId { get; set; }

        /// <summary>
        /// Resource location.
        /// </summary>
        [Input("location")]
        public Input<string>? Location { get; set; }

        /// <summary>
        /// Minimal TLS version. Allowed values: 'None', 1.0', '1.1', '1.2', '1.3'
        /// </summary>
        [Input("minimalTlsVersion")]
        public InputUnion<string, Pulumi.AzureNative.Sql.MinimalTlsVersion>? MinimalTlsVersion { get; set; }

        /// <summary>
        /// The resource id of a user assigned identity to be used by default.
        /// </summary>
        [Input("primaryUserAssignedIdentityId")]
        public Input<string>? PrimaryUserAssignedIdentityId { get; set; }

        /// <summary>
        /// Whether or not public endpoint access is allowed for this server.  Value is optional but if passed in, must be 'Enabled' or 'Disabled' or 'SecuredByPerimeter'
        /// </summary>
        [Input("publicNetworkAccess")]
        public InputUnion<string, Pulumi.AzureNative.Sql.ServerPublicNetworkAccessFlag>? PublicNetworkAccess { get; set; }

        /// <summary>
        /// The name of the resource group that contains the resource. You can obtain this value from the Azure Resource Manager API or the portal.
        /// </summary>
        [Input("resourceGroupName", required: true)]
        public Input<string> ResourceGroupName { get; set; } = null!;

        /// <summary>
        /// Whether or not to restrict outbound network access for this server.  Value is optional but if passed in, must be 'Enabled' or 'Disabled'
        /// </summary>
        [Input("restrictOutboundNetworkAccess")]
        public InputUnion<string, Pulumi.AzureNative.Sql.ServerNetworkAccessFlag>? RestrictOutboundNetworkAccess { get; set; }

        /// <summary>
        /// The name of the server.
        /// </summary>
        [Input("serverName")]
        public Input<string>? ServerName { get; set; }

        [Input("tags")]
        private InputMap<string>? _tags;

        /// <summary>
        /// Resource tags.
        /// </summary>
        public InputMap<string> Tags
        {
            get => _tags ?? (_tags = new InputMap<string>());
            set => _tags = value;
        }

        /// <summary>
        /// The version of the server.
        /// </summary>
        [Input("version")]
        public Input<string>? Version { get; set; }

        public ServerArgs()
        {
        }
        public static new ServerArgs Empty => new ServerArgs();
    }
}
